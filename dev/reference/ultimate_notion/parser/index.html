<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="The ultimate Python library for Notion!" name=description><meta content="Florian Wilhelm" name=author><link href=https://ultimate-notion.com/latest/dev/reference/ultimate_notion/parser/ rel=canonical><link href=../../../assets/images/logo.svg rel=icon><meta content="mkdocs-1.4.2, mkdocs-material-8.5.8" name=generator><title>parser - Ultimate-Notion</title><link href=../../../assets/stylesheets/main.20d9efc8.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.815d1a91.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../assets/_mkdocstrings.css rel=stylesheet><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gdesc-inner { font-size: 0.75rem; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                </style><script src=../../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=purple data-md-color-primary=purple data-md-color-scheme=slate dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#ultimate_notion.parser> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-component=outdated hidden> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label=Ultimate-Notion class="md-header__button md-logo" data-md-component=logo href=../../.. title=Ultimate-Notion> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m13.13 22.19-1.63-3.83c1.57-.58 3.04-1.36 4.4-2.27l-2.77 6.1M5.64 12.5l-3.83-1.63 6.1-2.77C7 9.46 6.22 10.93 5.64 12.5M19.22 4c.28 0 .53 0 .74.05.17 1.39-.02 4.25-3.3 7.53-1.7 1.71-3.73 3.02-6.01 3.89l-2.15-2.1c.92-2.31 2.23-4.34 3.92-6.03C15.18 4.58 17.64 4 19.22 4m0-2c-1.98 0-4.98.69-8.22 3.93-2.19 2.19-3.5 4.6-4.35 6.71-.28.75-.09 1.57.46 2.13l2.13 2.12c.38.38.89.61 1.42.61.23 0 .47-.06.7-.15A19.1 19.1 0 0 0 18.07 13c5.66-5.66 3.54-10.61 3.54-10.61S20.7 2 19.22 2m-4.68 7.46c-.78-.78-.78-2.05 0-2.83s2.05-.78 2.83 0c.77.78.78 2.05 0 2.83-.78.78-2.05.78-2.83 0m-5.66 7.07-1.41-1.41 1.41 1.41M6.24 22l3.64-3.64c-.34-.09-.67-.24-.97-.45L4.83 22h1.41M2 22h1.41l4.77-4.76-1.42-1.41L2 20.59V22m0-2.83 4.09-4.08c-.21-.3-.36-.62-.45-.97L2 17.76v1.41Z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Ultimate-Notion </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> parser </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=purple data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=purple data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"></path></svg> </label> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=purple data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=purple data-md-color-scheme=default id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/ultimate-notion/ultimate-notion title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </div> <div class=md-source__repository> ultimate-notion </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label=Ultimate-Notion class="md-nav__button md-logo" data-md-component=logo href=../../.. title=Ultimate-Notion> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m13.13 22.19-1.63-3.83c1.57-.58 3.04-1.36 4.4-2.27l-2.77 6.1M5.64 12.5l-3.83-1.63 6.1-2.77C7 9.46 6.22 10.93 5.64 12.5M19.22 4c.28 0 .53 0 .74.05.17 1.39-.02 4.25-3.3 7.53-1.7 1.71-3.73 3.02-6.01 3.89l-2.15-2.1c.92-2.31 2.23-4.34 3.92-6.03C15.18 4.58 17.64 4 19.22 4m0-2c-1.98 0-4.98.69-8.22 3.93-2.19 2.19-3.5 4.6-4.35 6.71-.28.75-.09 1.57.46 2.13l2.13 2.12c.38.38.89.61 1.42.61.23 0 .47-.06.7-.15A19.1 19.1 0 0 0 18.07 13c5.66-5.66 3.54-10.61 3.54-10.61S20.7 2 19.22 2m-4.68 7.46c-.78-.78-.78-2.05 0-2.83s2.05-.78 2.83 0c.77.78.78 2.05 0 2.83-.78.78-2.05.78-2.83 0m-5.66 7.07-1.41-1.41 1.41 1.41M6.24 22l3.64-3.64c-.34-.09-.67-.24-.97-.45L4.83 22h1.41M2 22h1.41l4.77-4.76-1.42-1.41L2 20.59V22m0-2.83 4.09-4.08c-.21-.3-.36-.62-.45-.97L2 17.76v1.41Z"></path></svg> </a> Ultimate-Notion </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/ultimate-notion/ultimate-notion title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </div> <div class=md-source__repository> ultimate-notion </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 id=__nav_1 type=checkbox> <label class=md-nav__link for=__nav_1> Home <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Home class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../..> About </a> </li> <li class=md-nav__item> <a href=../../../changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../../license/ class=md-nav__link> License </a> </li> <li class=md-nav__item> <a href=../../../authors/ class=md-nav__link> Authors </a> </li> <li class=md-nav__item> <a href=../../../contributing/ class=md-nav__link> Contributing </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_6 id=__nav_1_6 type=checkbox> <label class=md-nav__link for=__nav_1_6> Reference <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Reference class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_1_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_6_1 id=__nav_1_6_1 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../ >ultimate_notion</a> <label for=__nav_1_6_1> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=ultimate_notion class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_1_6_1> <span class="md-nav__icon md-icon"></span> ultimate_notion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../api/ class=md-nav__link> api </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1_6_1_2 id=__nav_1_6_1_2 type=checkbox> <div class="md-nav__link md-nav__link--index"> <a href=../core/ >core</a> <label for=__nav_1_6_1_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-label=core class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_1_6_1_2> <span class="md-nav__icon md-icon"></span> core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../core/bases/ class=md-nav__link> bases </a> </li> <li class=md-nav__item> <a href=../core/blocks/ class=md-nav__link> blocks </a> </li> <li class=md-nav__item> <a href=../core/endpoints/ class=md-nav__link> endpoints </a> </li> <li class=md-nav__item> <a href=../core/iterator/ class=md-nav__link> iterator </a> </li> <li class=md-nav__item> <a href=../core/orm/ class=md-nav__link> orm </a> </li> <li class=md-nav__item> <a href=../core/query/ class=md-nav__link> query </a> </li> <li class=md-nav__item> <a href=../core/records/ class=md-nav__link> records </a> </li> <li class=md-nav__item> <a href=../core/schema/ class=md-nav__link> schema </a> </li> <li class=md-nav__item> <a href=../core/text/ class=md-nav__link> text </a> </li> <li class=md-nav__item> <a href=../core/types/ class=md-nav__link> types </a> </li> <li class=md-nav__item> <a href=../core/user/ class=md-nav__link> user </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../database/ class=md-nav__link> database </a> </li> <li class=md-nav__item> <a href=../page/ class=md-nav__link> page </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> parser <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> parser </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser> parser </a> <nav aria-label=parser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.img_data_re> img_data_re </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.CsvParser> CsvParser </a> <nav aria-label=CsvParser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.CsvParser.schema> schema </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.CsvParser.parse> parse() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser> DocumentParser </a> <nav aria-label=DocumentParser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser.content> content </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser.title> title </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser.parse> parse() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.HtmlParser> HtmlParser </a> <nav aria-label=HtmlParser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.HtmlParser.meta> meta </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.HtmlParser.parse> parse() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.condense_text> condense_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.elem_has_text> elem_has_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.gather_text> gather_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.normalize_text> normalize_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.strip_text_block> strip_text_block() </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../session/ class=md-nav__link> session </a> </li> <li class=md-nav__item> <a href=../utils/ class=md-nav__link> utils </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser> parser </a> <nav aria-label=parser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.img_data_re> img_data_re </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.CsvParser> CsvParser </a> <nav aria-label=CsvParser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.CsvParser.schema> schema </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.CsvParser.parse> parse() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser> DocumentParser </a> <nav aria-label=DocumentParser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser.content> content </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser.title> title </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.DocumentParser.parse> parse() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.HtmlParser> HtmlParser </a> <nav aria-label=HtmlParser class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.HtmlParser.meta> meta </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.HtmlParser.parse> parse() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.condense_text> condense_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.elem_has_text> elem_has_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.gather_text> gather_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.normalize_text> normalize_text() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#ultimate_notion.parser.strip_text_block> strip_text_block() </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/ultimate-notion/ultimate-notion/blob/master/docs/src/ultimate_notion/parser.py title="Edit this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg> </a> <h1>parser</h1> <div class="doc doc-object doc-module"> <h2 class="doc doc-heading" id=ultimate_notion.parser> <code>parser</code> <a class=headerlink href=#ultimate_notion.parser title="Permanent link">¶</a></h2> <div class="doc doc-contents first"> <p>Utilities for parsing other document types in Notion.</p> <p>These parsers provide an alternative to the "Import" capabilities of the Notion client and Notion Web Clipper. Perhaps that capability will be exposed to the API in the future, which would effectively render these parsers unnecessary.</p> <!--- Add here generic links that can be used in every md doc --> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 class="doc doc-heading" id=ultimate_notion.parser.img_data_re> <code class="highlight language-python"><span class=n>img_data_re</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=s1>'^data:image/([^;]+);([^,]+),(.+)$'</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small> </span> <a class=headerlink href=#ultimate_notion.parser.img_data_re title="Permanent link">¶</a></h3> <div class="doc doc-contents"> </div> </div> <div class="doc doc-object doc-class"> <h3 class="doc doc-heading" id=ultimate_notion.parser.CsvParser> <code class="highlight language-python"><span class=n>CsvParser</span><span class=p>(</span><span class=n>header_row</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span> <span class=n>title_column</span> <span class=o>=</span> <span class=mi>0</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.CsvParser title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>A standard CSV parser.</p> <p>Contents of this parser are available as a list of page properties according to the determined schema. Specifically, this content follows the format:</p> <div class=highlight><pre><span></span><code>```
[
    {
        column_1_name: entry_1_column_1_data,
        column_2_name: entry_1_column_2_data,
        column_3_name: entry_1_column_3_data,
        ...
    },
    {
        column_1_name: entry_2_column_1_data,
        column_2_name: entry_2_column_2_data,
        column_3_name: entry_2_column_3_data,
        ...
    },
    ...
]
```
</code></pre></div> <!--- Add here generic links that can be used in every md doc --> <p>:param header_row: indicates that data will have a header row (for the schema) :param title_column: set the column in data to use for page titles</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="149 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>header_row</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>title_column</span><span class=o>=</span><span class=mi>0</span><span class=p>):</span>
<span class=linenos data-linenos="150 "></span>    <span class=sd>"""Initialize a new `CsvParser`.</span>
<span class=linenos data-linenos="151 "></span>
<span class=linenos data-linenos="152 "></span><span class=sd>    :param header_row: indicates that data will have a header row (for the schema)</span>
<span class=linenos data-linenos="153 "></span><span class=sd>    :param title_column: set the column in data to use for page titles</span>
<span class=linenos data-linenos="154 "></span><span class=sd>    """</span>
<span class=linenos data-linenos="155 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<span class=linenos data-linenos="156 "></span>
<span class=linenos data-linenos="157 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_has_header</span> <span class=o>=</span> <span class=n>header_row</span>
<span class=linenos data-linenos="158 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_title_index</span> <span class=o>=</span> <span class=n>title_column</span>
<span class=linenos data-linenos="159 "></span>
<span class=linenos data-linenos="160 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>schema</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="161 "></span>
<span class=linenos data-linenos="162 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_field_names</span> <span class=o>=</span> <span class=p>[]</span>
</code></pre></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h4 class="doc doc-heading" id=ultimate_notion.parser.CsvParser.schema> <code class="highlight language-python"><span class=n>schema</span> <span class=o>=</span> <span class=p>{}</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a class=headerlink href=#ultimate_notion.parser.CsvParser.schema title="Permanent link">¶</a></h4> <div class="doc doc-contents"> </div> </div> <div class="doc doc-object doc-function"> <h4 class="doc doc-heading" id=ultimate_notion.parser.CsvParser.parse> <code class="highlight language-python"><span class=n>parse</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.CsvParser.parse title="Permanent link">¶</a></h4> <div class="doc doc-contents"> <p>Parse the given CSV data.</p> <p>Upon return, the following properties will be available in the parser: <code>schema</code>: a computed schema for the supplied data <code>title</code>: the name of the CSV file being parsed (if available) <code>content</code>: a list of page properties with the tabular data</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="164 "></span><span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=linenos data-linenos="165 "></span>    <span class=sd>"""Parse the given CSV data.</span>
<span class=linenos data-linenos="166 "></span>
<span class=linenos data-linenos="167 "></span><span class=sd>    Upon return, the following properties will be available in the parser:</span>
<span class=linenos data-linenos="168 "></span><span class=sd>        `schema`: a computed schema for the supplied data</span>
<span class=linenos data-linenos="169 "></span><span class=sd>        `title`: the name of the CSV file being parsed (if available)</span>
<span class=linenos data-linenos="170 "></span><span class=sd>        `content`: a list of page properties with the tabular data</span>
<span class=linenos data-linenos="171 "></span><span class=sd>    """</span>
<span class=linenos data-linenos="172 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=linenos data-linenos="173 "></span>
<span class=linenos data-linenos="174 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
<span class=linenos data-linenos="175 "></span>        <span class=n>data</span> <span class=o>=</span> <span class=n>io</span><span class=o>.</span><span class=n>StringIO</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>newline</span><span class=o>=</span><span class=s2>""</span><span class=p>)</span>
<span class=linenos data-linenos="176 "></span>
<span class=linenos data-linenos="177 "></span>    <span class=n>reader</span> <span class=o>=</span> <span class=n>csv</span><span class=o>.</span><span class=n>reader</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=linenos data-linenos="178 "></span>
<span class=linenos data-linenos="179 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_process</span><span class=p>(</span><span class=n>reader</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 class="doc doc-heading" id=ultimate_notion.parser.DocumentParser> <code class="highlight language-python"><span class=n>DocumentParser</span><span class=p>()</span></code> <a class=headerlink href=#ultimate_notion.parser.DocumentParser title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>Base class for document parsers.</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="103 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=linenos data-linenos="104 "></span>    <span class=sd>"""Initialize the document parser."""</span>
<span class=linenos data-linenos="105 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>title</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="106 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>content</span> <span class=o>=</span> <span class=p>[]</span>
</code></pre></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h4 class="doc doc-heading" id=ultimate_notion.parser.DocumentParser.content> <code class="highlight language-python"><span class=n>content</span> <span class=o>=</span> <span class=p>[]</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a class=headerlink href=#ultimate_notion.parser.DocumentParser.content title="Permanent link">¶</a></h4> <div class="doc doc-contents"> </div> </div> <div class="doc doc-object doc-attribute"> <h4 class="doc doc-heading" id=ultimate_notion.parser.DocumentParser.title> <code class="highlight language-python"><span class=n>title</span> <span class=o>=</span> <span class=kc>None</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a class=headerlink href=#ultimate_notion.parser.DocumentParser.title title="Permanent link">¶</a></h4> <div class="doc doc-contents"> </div> </div> <div class="doc doc-object doc-function"> <h4 class="doc doc-heading" id=ultimate_notion.parser.DocumentParser.parse> <code class="highlight language-python"><span class=n>parse</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> <a class=headerlink href=#ultimate_notion.parser.DocumentParser.parse title="Permanent link">¶</a></h4> <div class="doc doc-contents"> <p>Parse the given data.</p> <p>This method will attempt to determine a default name for the document from the data source.</p> <p>Subclasses should call this method when implemting <code>parse()</code> locally.</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="108 "></span><span class=nd>@abstractmethod</span>
<span class=linenos data-linenos="109 "></span><span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=linenos data-linenos="110 "></span>    <span class=sd>"""Parse the given data.</span>
<span class=linenos data-linenos="111 "></span>
<span class=linenos data-linenos="112 "></span><span class=sd>    This method will attempt to determine a default name for the document from the</span>
<span class=linenos data-linenos="113 "></span><span class=sd>    data source.</span>
<span class=linenos data-linenos="114 "></span>
<span class=linenos data-linenos="115 "></span><span class=sd>    Subclasses should call this method when implemting `parse()` locally.</span>
<span class=linenos data-linenos="116 "></span><span class=sd>    """</span>
<span class=linenos data-linenos="117 "></span>
<span class=linenos data-linenos="118 "></span>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=s2>"name"</span><span class=p>):</span>
<span class=linenos data-linenos="119 "></span>        <span class=bp>self</span><span class=o>.</span><span class=n>title</span> <span class=o>=</span> <span class=n>basename</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h3 class="doc doc-heading" id=ultimate_notion.parser.HtmlParser> <code class="highlight language-python"><span class=n>HtmlParser</span><span class=p>(</span><span class=n>base</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.HtmlParser title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>An HTML parser that leverages the WHATWG HTML spec.</p> <!--- Add here generic links that can be used in every md doc --> <p>:param base: the base URL for resolving relative paths</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="250 "></span><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>base</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=linenos data-linenos="251 "></span>    <span class=sd>"""Initialize an empty `HtmlParser`.</span>
<span class=linenos data-linenos="252 "></span>
<span class=linenos data-linenos="253 "></span><span class=sd>    :param base: the base URL for resolving relative paths</span>
<span class=linenos data-linenos="254 "></span><span class=sd>    """</span>
<span class=linenos data-linenos="255 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<span class=linenos data-linenos="256 "></span>
<span class=linenos data-linenos="257 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_base_url</span> <span class=o>=</span> <span class=n>base</span>
<span class=linenos data-linenos="258 "></span>
<span class=linenos data-linenos="259 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>meta</span> <span class=o>=</span> <span class=p>{}</span>
<span class=linenos data-linenos="260 "></span>
<span class=linenos data-linenos="261 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_current_href</span> <span class=o>=</span> <span class=kc>None</span>
<span class=linenos data-linenos="262 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_current_text_style</span> <span class=o>=</span> <span class=n>Annotations</span><span class=p>()</span>
</code></pre></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h4 class="doc doc-heading" id=ultimate_notion.parser.HtmlParser.meta> <code class="highlight language-python"><span class=n>meta</span> <span class=o>=</span> <span class=p>{}</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small> </span> <a class=headerlink href=#ultimate_notion.parser.HtmlParser.meta title="Permanent link">¶</a></h4> <div class="doc doc-contents"> </div> </div> <div class="doc doc-object doc-function"> <h4 class="doc doc-heading" id=ultimate_notion.parser.HtmlParser.parse> <code class="highlight language-python"><span class=n>parse</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.HtmlParser.parse title="Permanent link">¶</a></h4> <div class="doc doc-contents"> <p>Parse the given HTML data.</p> <p>Upon return, the following properties will be available in the parser: <code>title</code>: contents of the <code>&lt;title&gt;</code> element if found <code>content</code>: a list of blocks containing rendered content from the HTML data <code>meta</code>: a dictionary of any <code>&lt;meta&gt;</code> tags that were found</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="264 "></span><span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=linenos data-linenos="265 "></span>    <span class=sd>"""Parse the given HTML data.</span>
<span class=linenos data-linenos="266 "></span>
<span class=linenos data-linenos="267 "></span><span class=sd>    Upon return, the following properties will be available in the parser:</span>
<span class=linenos data-linenos="268 "></span><span class=sd>        `title`: contents of the `&lt;title&gt;` element if found</span>
<span class=linenos data-linenos="269 "></span><span class=sd>        `content`: a list of blocks containing rendered content from the HTML data</span>
<span class=linenos data-linenos="270 "></span><span class=sd>        `meta`: a dictionary of any `&lt;meta&gt;` tags that were found</span>
<span class=linenos data-linenos="271 "></span><span class=sd>    """</span>
<span class=linenos data-linenos="272 "></span>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=linenos data-linenos="273 "></span>
<span class=linenos data-linenos="274 "></span>    <span class=n>doc</span> <span class=o>=</span> <span class=n>html5lib</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>namespaceHTMLElements</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=linenos data-linenos="275 "></span>
<span class=linenos data-linenos="276 "></span>    <span class=bp>self</span><span class=o>.</span><span class=n>_render</span><span class=p>(</span><span class=n>doc</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-function"> <h3 class="doc doc-heading" id=ultimate_notion.parser.condense_text> <code class="highlight language-python"><span class=n>condense_text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.condense_text title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>Collapse contiguous whitespace from the given text.</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="30 "></span><span class=k>def</span> <span class=nf>condense_text</span><span class=p>(</span><span class=n>text</span><span class=p>):</span>
<span class=linenos data-linenos="31 "></span>    <span class=sd>"""Collapse contiguous whitespace from the given text."""</span>
<span class=linenos data-linenos="32 "></span>
<span class=linenos data-linenos="33 "></span>    <span class=k>if</span> <span class=n>text</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="34 "></span>        <span class=k>return</span> <span class=kc>None</span>
<span class=linenos data-linenos="35 "></span>
<span class=linenos data-linenos="36 "></span>    <span class=k>return</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=sa>r</span><span class=s2>"\s+"</span><span class=p>,</span> <span class=s2>" "</span><span class=p>,</span> <span class=n>text</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=n>re</span><span class=o>.</span><span class=n>MULTILINE</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 class="doc doc-heading" id=ultimate_notion.parser.elem_has_text> <code class="highlight language-python"><span class=n>elem_has_text</span><span class=p>(</span><span class=n>elem</span><span class=p>,</span> <span class=n>with_children</span> <span class=o>=</span> <span class=kc>True</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.elem_has_text title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>Determine if the element has any visible text.</p> <p>:param elem: the element to examine :param with_children: whether to include children nodes in the search</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="72 "></span><span class=k>def</span> <span class=nf>elem_has_text</span><span class=p>(</span><span class=n>elem</span><span class=p>,</span> <span class=n>with_children</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
<span class=linenos data-linenos="73 "></span>    <span class=sd>"""Determine if the element has any visible text.</span>
<span class=linenos data-linenos="74 "></span>
<span class=linenos data-linenos="75 "></span><span class=sd>    :param elem: the element to examine</span>
<span class=linenos data-linenos="76 "></span><span class=sd>    :param with_children: whether to include children nodes in the search</span>
<span class=linenos data-linenos="77 "></span><span class=sd>    """</span>
<span class=linenos data-linenos="78 "></span>
<span class=linenos data-linenos="79 "></span>    <span class=c1># first, check the direct text of the element...</span>
<span class=linenos data-linenos="80 "></span>    <span class=k>if</span> <span class=n>elem</span><span class=o>.</span><span class=n>text</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>elem</span><span class=o>.</span><span class=n>text</span><span class=o>.</span><span class=n>isspace</span><span class=p>():</span>
<span class=linenos data-linenos="81 "></span>        <span class=k>return</span> <span class=kc>True</span>
<span class=linenos data-linenos="82 "></span>
<span class=linenos data-linenos="83 "></span>    <span class=c1># now, we need to check the tail of each child...</span>
<span class=linenos data-linenos="84 "></span>    <span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>elem</span><span class=p>:</span>
<span class=linenos data-linenos="85 "></span>        <span class=k>if</span> <span class=n>with_children</span> <span class=ow>and</span> <span class=n>elem_has_text</span><span class=p>(</span><span class=n>child</span><span class=p>):</span>
<span class=linenos data-linenos="86 "></span>            <span class=k>return</span> <span class=kc>True</span>
<span class=linenos data-linenos="87 "></span>
<span class=linenos data-linenos="88 "></span>        <span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=n>tail</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="89 "></span>            <span class=k>continue</span>
<span class=linenos data-linenos="90 "></span>
<span class=linenos data-linenos="91 "></span>        <span class=k>if</span> <span class=ow>not</span> <span class=n>child</span><span class=o>.</span><span class=n>tail</span><span class=o>.</span><span class=n>isspace</span><span class=p>():</span>
<span class=linenos data-linenos="92 "></span>            <span class=k>return</span> <span class=kc>True</span>
<span class=linenos data-linenos="93 "></span>
<span class=linenos data-linenos="94 "></span>    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 class="doc doc-heading" id=ultimate_notion.parser.gather_text> <code class="highlight language-python"><span class=n>gather_text</span><span class=p>(</span><span class=n>elem</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.gather_text title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>Return all text from the element and children.</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="50 "></span><span class=k>def</span> <span class=nf>gather_text</span><span class=p>(</span><span class=n>elem</span><span class=p>):</span>
<span class=linenos data-linenos="51 "></span>    <span class=sd>"""Return all text from the element and children."""</span>
<span class=linenos data-linenos="52 "></span>    <span class=n>text</span> <span class=o>=</span> <span class=s2>""</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>elem</span><span class=o>.</span><span class=n>itertext</span><span class=p>())</span>
<span class=linenos data-linenos="53 "></span>    <span class=k>return</span> <span class=n>normalize_text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 class="doc doc-heading" id=ultimate_notion.parser.normalize_text> <code class="highlight language-python"><span class=n>normalize_text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.normalize_text title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>Remove extra whitespace from the given text.</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="39 "></span><span class=k>def</span> <span class=nf>normalize_text</span><span class=p>(</span><span class=n>text</span><span class=p>):</span>
<span class=linenos data-linenos="40 "></span>    <span class=sd>"""Remove extra whitespace from the given text."""</span>
<span class=linenos data-linenos="41 "></span>
<span class=linenos data-linenos="42 "></span>    <span class=k>if</span> <span class=n>text</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<span class=linenos data-linenos="43 "></span>        <span class=k>return</span> <span class=kc>None</span>
<span class=linenos data-linenos="44 "></span>
<span class=linenos data-linenos="45 "></span>    <span class=n>text</span> <span class=o>=</span> <span class=n>text</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
<span class=linenos data-linenos="46 "></span>
<span class=linenos data-linenos="47 "></span>    <span class=k>return</span> <span class=n>condense_text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</code></pre></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 class="doc doc-heading" id=ultimate_notion.parser.strip_text_block> <code class="highlight language-python"><span class=n>strip_text_block</span><span class=p>(</span><span class=n>block</span><span class=p>)</span></code> <a class=headerlink href=#ultimate_notion.parser.strip_text_block title="Permanent link">¶</a></h3> <div class="doc doc-contents"> <p>Remove leading and trailing whitespace from text in the given block.</p> <!--- Add here generic links that can be used in every md doc --> <details class=quote> <summary>Source code in <code>ultimate_notion/parser.py</code></summary> <div class=highlight><pre><span></span><code><span class=linenos data-linenos="56 "></span><span class=k>def</span> <span class=nf>strip_text_block</span><span class=p>(</span><span class=n>block</span><span class=p>):</span>
<span class=linenos data-linenos="57 "></span>    <span class=sd>"""Remove leading and trailing whitespace from text in the given block."""</span>
<span class=linenos data-linenos="58 "></span>
<span class=linenos data-linenos="59 "></span>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>block</span><span class=p>,</span> <span class=n>blocks</span><span class=o>.</span><span class=n>TextBlock</span><span class=p>):</span>
<span class=linenos data-linenos="60 "></span>        <span class=k>return</span>
<span class=linenos data-linenos="61 "></span>
<span class=linenos data-linenos="62 "></span>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>block</span><span class=p>,</span> <span class=n>blocks</span><span class=o>.</span><span class=n>Code</span><span class=p>):</span>
<span class=linenos data-linenos="63 "></span>        <span class=k>return</span>
<span class=linenos data-linenos="64 "></span>
<span class=linenos data-linenos="65 "></span>    <span class=n>block_text</span> <span class=o>=</span> <span class=n>block</span><span class=o>.</span><span class=n>__text__</span>
<span class=linenos data-linenos="66 "></span>
<span class=linenos data-linenos="67 "></span>    <span class=k>if</span> <span class=n>block_text</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>block_text</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
<span class=linenos data-linenos="68 "></span>        <span class=n>lstrip</span><span class=p>(</span><span class=n>block_text</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
<span class=linenos data-linenos="69 "></span>        <span class=n>rstrip</span><span class=p>(</span><span class=n>block_text</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
</code></pre></div> </details> </div> </div> </div> </div> </div><!--- Add here generic links that can be used in every md doc --> </article> </div> </div> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: page" class="md-footer__link md-footer__link--prev" href=../page/ rel=prev> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> page </div> </div> </a> <a aria-label="Next: session" class="md-footer__link md-footer__link--next" href=../session/ rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> session </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright © Florian Wilhelm 2022-present </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/ultimate-notion/ultimate-notion rel=noopener target=_blank title=github.com> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.sections", "navigation.tabs.sticky", "navigation.instant"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.d6c3db9e.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom"});})</script></body> </html>